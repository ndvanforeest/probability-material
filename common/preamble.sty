%\ProvidesPackage{preamble}
%\RequirePackage{./abbbrevations}

\usepackage{classicthesis}

\titleformat{\chapter}[display]%
  {\relax}{\vspace*{-3\baselineskip}\makebox[\linewidth][r]{\color{halfgray}\chapterNumber\thechapter}}{0pt}%
  {\raggedright\spacedallcaps}[\normalsize\vspace*{.8\baselineskip}\titlerule]%

\newcommand{\sectionbreak}{\clearpage}

\usepackage[english]{babel}
\usepackage{mathtools,amsthm,amssymb,amsmath}

\usepackage{fourier}
\usepackage{hyperref}
\usepackage[capitalize]{cleveref}

\usepackage{subfiles}
\usepackage{tikz}

\usepackage{pythontex}
\setpythontexfv[]{numbers=left, frame=lines, label=\fbox{Python Code}, xleftmargin=5mm,framesep=2mm}

\usepackage{minted}
\setminted[python]{numbers=left, frame=lines, label=\fbox{Python Code}, xleftmargin=5mm,framesep=2mm,fontsize=\small, samepage=true}
%\setpythontexfv[]{numbers=left, frame=lines, label=\fbox{Python Code}, xleftmargin=5mm,framesep=2mm,fontsize=\small}
\setminted[R]{numbers=left, frame=lines, label=\fbox{R Code}, xleftmargin=5mm,framesep=2mm,fontsize=\small, samepage=true}


\usepackage{enumerate}
\usepackage{xr}
\usepackage{wasysym} % for smileys

\numberwithin{equation}{section}


\opt{all-solutions-at-end}{
\usepackage{answers}
\Newassociation{solution}{Solution}{ans}
\Newassociation{hint}{Hint}{hint}
\renewcommand{\Hintlabel}[1]{\textbf{h.#1.}}
\renewcommand{\Solutionlabel}[1]{\textbf{s.#1.}}
}

\opt{check}{
\usepackage[nosolutionfiles]{answers}
\Newassociation{solution}{Solution}{ans}
\Newassociation{hint}{Hint}{hint}
\renewcommand{\Hintlabel}[1]{\emph{h.#1.}}
\renewcommand{\Solutionlabel}[1]{\emph{s.#1.}}
}

\opt{justhints}{
\usepackage{answers}
\Newassociation{hint}{Hint}{hint}
\renewcommand{\Hintlabel}[1]{\textbf{h.#1.}}
\excludecomment{solution}
}

\opt{nosolutions}{
\usepackage{comment}
\excludecomment{hint}
\excludecomment{solution}
}


% I don't like slanted fonts in the exercises
\theoremstyle{definition}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{exercise}{Ex}[section]
\newtheorem{remark}[theorem]{Remark}
\newtheorem{truefalse}[exercise]{TF}


\crefname{equation}{}{}
\crefformat{exercise}{[#2#1#3]}
\crefrangeformat{exercise}{[#3#1#4] to~[#5#2#6]}
\crefmultiformat{exercise}{[#2#1#3]}{ and~[#2#1#3]}{, [#2#1#3]}{ and~]#2#1#3]}

% abbreviations

\newcommand{\N}{\mathbb{N}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Z}{\mathbb{Z}}
\DeclareMathOperator*{\argmin}{arg\,min}

\newcommand{\abs}[1]{\left\vert#1\right\vert}
\newcommand{\cm}{\,\mathrm{cm}}
\newcommand{\m}{\,\mathrm{m}}
\newcommand{\given}{\,\middle|\,}
\newcommand{\Beta}[1]{\mathrm{Beta}(#1)}
\newcommand{\Bern}[1]{\mathrm{Bern}(#1)}
\newcommand{\Bin}[1]{\mathrm{Bin}(#1)}
\newcommand{\NBin}[1]{\mathrm{NBin}(#1)}
\newcommand{\Exp}[1]{\mathrm{Exp}(#1)}
\newcommand{\FS}[1]{\mathrm{FS}(#1)}
\newcommand{\Gamm}[1]{\mathrm{Gamma}(#1)}
\newcommand{\Geo}[1]{\mathrm{Geo}(#1)}
\newcommand{\HGeom}[1]{\mathrm{HGeom}(#1)}
\newcommand{\Norm}[1]{\mathrm{Norm}(#1)}
\newcommand{\Pois}[1]{\mathrm{Pois}(#1)}
\newcommand{\Unif}[1]{\mathrm{Unif}(#1)}
\newcommand{\DUnif}[1]{\mathrm{DUnif}(#1)}
\renewcommand{\P}[1]{\,\mathsf{P}\left\{#1\right\}}
\newcommand{\E}[1]{\,\mathsf{E}\left[#1\right]}
\newcommand{\EE}[2]{\,\mathsf{E}_{#1}\left[#2\right]}
\newcommand{\V}[1]{\,\mathsf{V}\left[#1\right]}
\newcommand{\VV}[2]{\,\mathsf{V}_{#1}\left[#2\right]}
\newcommand{\cov}[1]{\,\mathsf{Cov}\left[#1\right]}
\newcommand{\cor}[1]{\,\mathsf{Cor}\left[#1\right]}
\newcommand{\supp}[1]{\,\mathrm{supp}\left(#1\right)}
\renewcommand{\d}[1]{\,\textrm{d}#1}
\newcommand{\1}[1]{\,I_{#1}} % indicator
\newcommand{\iid}{\ensuremath{\mathrm{iid}\,}}
\newcommand{\is}[1]{\stackrel{#1}{=}}
